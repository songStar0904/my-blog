(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{491:function(t,s,n){"use strict";n.r(s);var a=n(24),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"instanceof"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#instanceof","aria-hidden":"true"}},[t._v("#")]),t._v(" instanceof")]),t._v(" "),n("p",[t._v("又介绍一个老朋友——"),n("code",[t._v("instanceof")]),t._v("。")]),t._v(" "),n("p",[t._v("对于值类型，你可以通过"),n("code",[t._v("typeof")]),t._v("判断，"),n("code",[t._v("string/number/boolean")]),t._v("都很清楚，但是"),n("code",[t._v("typeof")]),t._v("在判断到"),n("code",[t._v("引用类型")]),t._v("的时候，返回值只有"),n("code",[t._v("object/function")]),t._v("，你不知道它到底是一个"),n("code",[t._v("object")]),t._v("对象，还是数组，还是"),n("code",[t._v("new Number")]),t._v("等等。")]),t._v(" "),n("p",[t._v("这个时候就需要用到"),n("code",[t._v("instanceof")]),t._v("。例如：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" f1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("f1 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("f1 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("l "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])]),n("p",[t._v("上图中，"),n("code",[t._v("f1")]),t._v("这个对象是被"),n("code",[t._v("Foo")]),t._v("创建，但是"),n("code",[t._v("f1 instanceof Object")]),t._v("为什么是true呢？")]),t._v(" "),n("p",[t._v("至于为什么过会儿再说，先把"),n("code",[t._v("instanceof")]),t._v("判断的规则告诉大家。根据以上代码看下图：")]),t._v(" "),n("p",[n("img",{attrs:{src:"/my-blog/closure/181635468939277.png",alt:""}})]),t._v(" "),n("p",[n("code",[t._v("Instanceof")]),t._v("运算符的第一个变量是一个对象，暂时称为A；第二个变量一般是一个函数，暂时称为B。")]),t._v(" "),n("p",[n("code",[t._v("Instanceof")]),t._v("的判断队则是：沿着A的"),n("code",[t._v("__proto__")]),t._v("这条线来找，同时沿着B的"),n("code",[t._v("prototype")]),t._v("这条线来找，如果两条线能找到同一个引用，即同一个对象，那么就返回"),n("code",[t._v("true")]),t._v("。如果找到终点还未重合，则返回"),n("code",[t._v("false")]),t._v("。")]),t._v(" "),n("p",[t._v("按照以上规则，大家看看"),n("code",[t._v("f1 instanceof Object")]),t._v("这句代码是不是true？ 根据上图很容易就能看出来，就是"),n("code",[t._v("true")]),t._v("。")]),t._v(" "),n("p",[t._v("通过上以规则，你可以解释很多比较怪异的现象，例如：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Object "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Function "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Function "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])]),n("p",[t._v("这些看似很混乱的东西，答案却都是"),n("code",[t._v("true")]),t._v("，这是为何？")]),t._v(" "),n("p",[t._v('正好，这里也接上了咱们上一节说的"乱"。')]),t._v(" "),n("p",[t._v("上一节咱们贴了好多的图片，其实那些图片是可以联合成一个整体的，即：")]),t._v(" "),n("p",[n("img",{attrs:{src:"/my-blog/closure/181637013624694.png",alt:""}})]),t._v(" "),n("p",[t._v("看这个图片，千万不要嫌烦，必须一条线一条线挨着分析。如果上一节你看的比较仔细，再结合刚才咱们介绍的"),n("code",[t._v("instanceof")]),t._v("的概念，相信能看懂这个图片的内容。")]),t._v(" "),n("p",[t._v("看看这个图片，你也就知道为何上面三个看似混乱的语句返回的是"),n("code",[t._v("true")]),t._v("了。")]),t._v(" "),n("p",[t._v("问题又出来了。"),n("code",[t._v("Instanceof")]),t._v("这样设计，到底有什么用？到底"),n("code",[t._v("instanceof")]),t._v("想表达什么呢？")]),t._v(" "),n("p",[t._v("重点就这样被这位老朋友给引出来了——继承——原型链。")]),t._v(" "),n("p",[t._v("即，instanceof表示的就是一种继承关系，或者原型链的结构。请看下节分解。")])])},[],!1,null,null,null);e.options.__file="closure-5.md";s.default=e.exports}}]);