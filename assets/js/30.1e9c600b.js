(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{481:function(t,a,_){"use strict";_.r(a);var v=_(24),e=Object(v.a)({},function(){var t=this,a=t.$createElement,_=t._self._c||a;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"只需两步获取任何微信小程序源码"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#只需两步获取任何微信小程序源码","aria-hidden":"true"}},[t._v("#")]),t._v(" 只需两步获取任何微信小程序源码")]),t._v(" "),_("p",[t._v("转自"),_("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/37667537",target:"_blank",rel:"noopener noreferrer"}},[t._v("只需两步获取任何微信小程序源码"),_("OutboundLink")],1)]),t._v(" "),_("p",[_("img",{attrs:{src:"https://pic3.zhimg.com/v2-42e2fbf96f17f691e179536188546cb6_1200x500.jpg",alt:""}}),t._v("\n最近在学习微信小程序开发，半个月学习下来，很想实战一下踩踩坑，于是就仿写了一个滴滴他们家的青桔单车小程序的前端实现，过程一言难尽，差不多两周时间过去了，发现小程序的坑远比想象的要多的多！！在实际练手中，完全是黑盒的，看到人家上线的小程序的效果，纯靠推测，部分效果在绞尽脑汁后能做出大致的实现，但是有些细节，费劲全力都没能做出来。很想一窥源码，查看究竟，看看大厂的前端大神们是如何规避了小程序的各种奇葩的坑。")]),t._v(" "),_("p",[t._v("于是就想到获取到小程序地源文件，然后再对其进行反编译还原为源代码，来作为学习参考。我百度了各种关于小程序地反编译教程，但是感觉都不太适合像我这样地初学小白，踩了挺多坑。在这里把我重新简化好的， "),_("strong",[t._v("快速地获取一个微信小程序源码")]),t._v(" 的方式记录下来。")]),t._v(" "),_("h2",{attrs:{id:"简单聊一下-xxxxx-wxapkg"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#简单聊一下-xxxxx-wxapkg","aria-hidden":"true"}},[t._v("#")]),t._v(" 简单聊一下 "),_("code",[t._v("xxxxx.wxapkg")])]),t._v(" "),_("p",[t._v("先来想想一个很简单的问题，小程序的源文件存放在哪？")]),t._v(" "),_("ul",[_("li",[t._v("当然是在微信的服务器上。")])]),t._v(" "),_("h2",{attrs:{id:"但是在微信服务器上，普通用户想要获取到，肯定是十分困难的，有没有别的办法呢？"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#但是在微信服务器上，普通用户想要获取到，肯定是十分困难的，有没有别的办法呢？","aria-hidden":"true"}},[t._v("#")]),t._v(" 但是在微信服务器上，普通用户想要获取到，肯定是十分困难的，有没有别的办法呢？")]),t._v(" "),_("ul",[_("li",[t._v("简单思考一下我们使用小程序的场景就会明白，当我们点开一个微信小程序的时候，其实是微信已经将它的从服务器上下载到了手机，然后再来运行的。")]),t._v(" "),_("li",[t._v("所以，虽然我们没能力从 "),_("code",[t._v("服务器")]),t._v(" 上获取到，但是我们应该可以从 "),_("code",[t._v("手机本地")]),t._v(" 找到到已经下载过的小程序源文件")])]),t._v(" "),_("h2",{attrs:{id:"那么如何才能在手机里找到小程序的源文件包呢？"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#那么如何才能在手机里找到小程序的源文件包呢？","aria-hidden":"true"}},[t._v("#")]),t._v(" 那么如何才能在手机里找到小程序的源文件包呢？")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("这里只以安卓手机为例，毕竟穷逼不曾拥有过苹果手机")])]),t._v(" "),_("li",[_("p",[t._v("具体目录位置直接给出：")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("/data/data/com.tencent.mm/MicroMsg/"+t._s(t.一串32位的16进制字符串文件夹)+"/appbrand/pkg/")])])])]),t._v(" "),_("li",[_("p",[t._v("在这个目录下，会发现一些 "),_("code",[t._v("xxxxxxx.wxapkg")]),t._v(" 类型的文件，这些就是微信小程序的包")])])]),t._v(" "),_("h2",{attrs:{id:"准备材料"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#准备材料","aria-hidden":"true"}},[t._v("#")]),t._v(" 准备材料")]),t._v(" "),_("ol",[_("li",[_("code",[t._v("node.js")]),t._v("运行环境")])]),t._v(" "),_("ul",[_("li",[t._v("如果没有安装nodejs，请先安装一下")]),t._v(" "),_("li",[t._v("下载地址："),_("a",{attrs:{href:"http://link.zhihu.com/?target=http%3A//nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://nodejs.org/en/"),_("OutboundLink")],1)])]),t._v(" "),_("ol",{attrs:{start:"2"}},[_("li",[t._v("反编译的脚本")])]),t._v(" "),_("ul",[_("li",[t._v("这里提供一个Github上 "),_("code",[t._v("qwerty472123")]),t._v(" 大神写的node.js版本的，当然也有其它版本的，这里我只是简单地用node.js版本举例")]),t._v(" "),_("li",[t._v("地址："),_("strong",[t._v("_ "),_("a",{attrs:{href:"http://link.zhihu.com/?target=https%3A//link.juejin.im/%3Ftarget%3Dhttps%253A%252F%252Fgithub.com%252Fqwerty472123%252FwxappUnpacker",target:"_blank",rel:"noopener noreferrer"}},[t._v("github.com/qwerty47212..."),_("OutboundLink")],1),t._v("_")])])]),t._v(" "),_("ol",{attrs:{start:"3"}},[_("li",[t._v("安卓模拟器（要求自带root权限）\n我使用的是 夜神模拟器 ，用来获取小程序源文件\n下载地址： "),_("a",{attrs:{href:"http://link.zhihu.com/?target=https%3A//link.juejin.im/%3Ftarget%3Dhttps%253A%252F%252Fwww.yeshen.com%252Fcn%252Fdownload%252FfullPackage",target:"_blank",rel:"noopener noreferrer"}},[t._v("www.yeshen.com/cn/download…"),_("OutboundLink")],1)])]),t._v(" "),_("h2",{attrs:{id:"详细步骤："}},[_("a",{staticClass:"header-anchor",attrs:{href:"#详细步骤：","aria-hidden":"true"}},[t._v("#")]),t._v(" 详细步骤：")]),t._v(" "),_("ul",[_("li",[t._v("微信小程序的格式就是: "),_("code",[t._v(".wxapkg")])]),t._v(" "),_("li",[t._v(".wxapkg是一个二进制文件，有其自己的一套结构。")]),t._v(" "),_("li",[t._v("关于.wxapkg的详细内容可以参考\n"),_("strong",[_("em",[_("a",{attrs:{href:"http://link.zhihu.com/?target=https%3A//link.juejin.im/%3Ftarget%3Dhttp%253A%252F%252Flrdcq.com%252Fme%252Fread.php%252F66.htm",target:"_blank",rel:"noopener noreferrer"}},[t._v("lrdcq大神的博文：微信小程序源码阅读笔记"),_("OutboundLink")],1)])])]),t._v(" "),_("li",[t._v("但是这里有个"),_("strong",[t._v("坑")]),t._v(" ，想要进入到上面这个目录的话，用手机自带的文件管理器肯定是不行的， "),_("code",[t._v("安卓")]),t._v(" 或者 "),_("code",[t._v("iPhone")]),t._v(" 都要要用到第三方的文件管理器，比如： "),_("code",[t._v("RE文件管理器")]),t._v(" ，并且安卓需要取得root权限，而苹果手机肯定是要越狱的，且"),_("strong",[t._v("iphone的越狱难度>>安卓获取root")]),t._v(" ，不管越狱还是root，这都太费劲，当然有能力的同学可以直接从手机上来操作，但是这里 "),_("code",[t._v("不推荐从真机上获取")]),t._v(" 。")])]),t._v(" "),_("h3",{attrs:{id:"使用安卓模拟器获取到-wxapkg文件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#使用安卓模拟器获取到-wxapkg文件","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用安卓模拟器获取到.wxapkg文件")]),t._v(" "),_("p",[t._v("不用越狱，不用root，使用电脑端的 "),_("strong",[t._v("安卓模拟器")]),t._v(" 来获取是一个 "),_("strong",[t._v("非常简单快捷且万能的")]),t._v(" 获取方式，具体步骤如下：")]),t._v(" "),_("ol",[_("li",[t._v("打开安装好的安卓模拟器，并在模拟器中安装 QQ 、 微信 、 RE管理器")])]),t._v(" "),_("ul",[_("li",[t._v("QQ 、 微信 在模拟器自带的应用商店里搜索下载安装即可")]),t._v(" "),_("li",[t._v("RE管理器 的下载地址： "),_("a",{attrs:{href:"http://link.zhihu.com/?target=https%3A//link.juejin.im/%3Ftarget%3Dhttps%253A%252F%252Fpan.baidu.com%252Fs%252F1PPBx08rNutXxhlMMJbuTpQ",target:"_blank",rel:"noopener noreferrer"}},[t._v("pan.baidu.com/s/1PPBx08rN…"),_("OutboundLink")],1)]),t._v(" "),_("li",[t._v("下载好后直接拖拽进打开的模拟器窗口就会自动安装")])]),t._v(" "),_("ol",{attrs:{start:"2"}},[_("li",[t._v("设置一下模拟器")])]),t._v(" "),_("ul",[_("li",[_("p",[t._v("以我个人认为比较好用的 "),_("code",[t._v("夜神模拟器")]),t._v(" 举例")])]),t._v(" "),_("li",[_("p",[t._v("首先到模拟器内部设置超级用户权限\n"),_("img",{attrs:{src:"https://pic3.zhimg.com/80/v2-bd5f9debf0aa5cef456dbd0c2094a7a6_hd.jpg",alt:""}}),t._v(" "),_("img",{attrs:{src:"https://pic1.zhimg.com/80/v2-d220aac7c4be1a1457e2ed01b53e0268_hd.jpg",alt:""}})])]),t._v(" "),_("li",[_("p",[t._v("这些操作的目的都是为了能让 "),_("code",[t._v("RE管理器")]),t._v(" 顺利的获取到ROOT权限")])])]),t._v(" "),_("ol",[_("li",[t._v("接下来在模拟器里打开微信，然后在微信中运行你想要获取的下程序（这其实是让微信把小程序的源文件包从服务器下载到了本地了）")])]),t._v(" "),_("ul",[_("li",[t._v("就以我说的这款青桔单车的小程序举例（希望滴滴的大神不会想打死我~）")]),t._v(" "),_("li",[t._v("在模拟器微信中运行一下后，"),_("strong",[t._v("直接切回模拟器桌面运行RE浏览器")]),t._v(" 来到目录")]),t._v(" "),_("li",[_("code",[t._v("/data/data/com.tencent.mm/MicroMsg/"+t._s(t.一串32位的16进制字符串文件夹)+"/appbrand/pkg/")])]),t._v(" "),_("li",[t._v("就抵达了目的文件夹\n"),_("img",{attrs:{src:"https://pic1.zhimg.com/80/v2-cc703b5775beea55a1127826bed3d90c_hd.jpg",alt:""}})]),t._v(" "),_("li",[t._v("你会看到发现里面的一些.wxapkg后缀的文件，就是它们没错啦，可以根据使用的时间来判断那个是你刚才从服务器下载过来的")]),t._v(" "),_("li",[t._v("一般小程序的文件不会太大，可以结合时间来判断，长按压缩所选文件,然后再将压缩好的包通过QQ发送到 "),_("code",[t._v("我的电脑")])]),t._v(" "),_("li",[t._v("如果不进行压缩的话，是无法将这个文件通过QQ来发送的")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://pic4.zhimg.com/80/v2-fb017ead7f22979f0b8aeb2f902bb9b3_hd.jpg",alt:""}})]),t._v(" "),_("ul",[_("li",[t._v("所以QQ的这个功能可以让我们很方便的拿到源文件，而不必到电脑目录去找模拟器的文件目录。")]),t._v(" "),_("li",[t._v("解压。这样几步简单操作，就成功拿到了小程序的源文件了。")])]),t._v(" "),_("h3",{attrs:{id:"使用反编译脚本解包-wxapkg"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#使用反编译脚本解包-wxapkg","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用反编译脚本解包 wxapkg")]),t._v(" "),_("ul",[_("li",[t._v("到这里你应该已经将反编译脚本从github下载 或者 clone 到本地某个目录")]),t._v(" "),_("li",[t._v("打开nodejs命令窗口")]),t._v(" "),_("li",[t._v("cd 到你clone或者下载好的反编译脚本目录下")]),t._v(" "),_("li",[t._v("在node命令窗口中依次安装如下依赖：")])]),t._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("npm install esprima\n\nnpm install css-tree\n\nnpm install cssbeautify\n\nnpm install vm2\n\nnpm install uglify-es\n")])])]),_("ul",[_("li",[t._v("安装好依赖之后，就是最后一步了，反编译 .wxapkg 文件")]),t._v(" "),_("li",[t._v("在当前目录下输入\n"),_("code",[t._v("node wuWxapkg.js [-d] <files...> //files 就是你想要反编译的文件名")]),t._v("\n例如：我有一个需要反编译的文件 "),_("code",[t._v("_163200311_32.wxapkg")]),t._v(" 已经解压到了D盘根目录下,那么就输出命令\n"),_("code",[t._v("node .\\wuWxapkg.js D:\\_163200311_32.wxapkg")])]),t._v(" "),_("li",[t._v("回车运行")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://pic4.zhimg.com/80/v2-3d07100d5d897328298bfa0efb51a5e7_hd.jpg",alt:""}})]),t._v(" "),_("ul",[_("li",[t._v("反编译脚本就能一步将.wxapkg 文件还原为微信开发者工具能够运行的源文件，"),_("strong",[t._v("目录地址和你反编译的文件地址是一样的")])])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://pic2.zhimg.com/80/v2-29a6521b85502ac3584f26c5c40063dd_hd.jpg",alt:""}})]),t._v(" "),_("p",[t._v("然后在微信开发者工具新增项目即可打开")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://pic2.zhimg.com/80/v2-a710b3e53a4629ed4cac61c8d9d25c91_hd.jpg",alt:""}})]),t._v(" "),_("ul",[_("li",[t._v("运行成功，源码获取完成")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://pic4.zhimg.com/80/v2-328cac06b6816617ff8d3a0243200beb_hd.jpg",alt:""}})]),t._v(" "),_("h2",{attrs:{id:"只需两步即可完成"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#只需两步即可完成","aria-hidden":"true"}},[t._v("#")]),t._v(" 只需两步即可完成")]),t._v(" "),_("p",[t._v("至此我们就通过非常简单的方式获取到了一个想要的小程序源文件，并对齐进行了反编译还原 以后想要再反编译其他的小程序，非常快速， "),_("strong",[t._v("真的只需要两步")])]),t._v(" "),_("p",[t._v("使用此方法，绝大部分的小程序都能正常反编译出来，但是也会有一些特殊的情况，具体可以查看 "),_("code",[t._v("qwerty472123")]),t._v(" 大神的readme文件")]),t._v(" "),_("h2",{attrs:{id:"写在后面的话"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#写在后面的话","aria-hidden":"true"}},[t._v("#")]),t._v(" 写在后面的话")]),t._v(" "),_("p",[t._v(".apk 之类的文件反编译非常困难，而小程序竟可以如此轻松随意地被获取到源码，根源在于小程序的开发团队并没有对小程序的执行文件进行有效的保护，也就是加密，所以我们才能使用别人写好的脚本直接进行反编译，其过程类似于解压。")]),t._v(" "),_("p",[t._v("实际上，小程序只是很简单的将图片、js和json文件压在一起，而压制的过程就是Wxml -> Html、 Wxml -> JS、Wxss -> Css，转换后文件二进制格式跟后缀名为wx二进制格式完全一致。")]),t._v(" "),_("p",[t._v("上线的源代码能如此简单的被获取到，不得不说小程序的源码安全存在很大的隐患，这一点很多开发者应该也知道，所以发现有些小程序会将重要的js逻辑代码柔在一个js文件中，这样，即使被获取了源码，也不是很容易读懂，但是任然避免不了被窥视的问题。 小程序作为微信生态内的新生力量，不仅被官方，也被很多开发者和内容创业者寄予厚望，处于对代码的安全性的考虑，这个漏洞迟早有一天会被 "),_("strong",[t._v("修复（封掉）")]),t._v(" 的。")]),t._v(" "),_("p",[t._v("所以这种这里介绍的获取小程序源码的方法，应该是不会太长久的。")])])},[],!1,null,null,null);e.options.__file="miniapp-copyCode.md";a.default=e.exports}}]);