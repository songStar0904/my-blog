(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{444:function(_,o,v){"use strict";v.r(o);var t=v(24),e=Object(t.a)({},function(){var _=this,o=_.$createElement,v=_._self._c||o;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"隐式原型"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#隐式原型","aria-hidden":"true"}},[_._v("#")]),_._v(" 隐式原型")]),_._v(" "),v("p",[v("em",[_._v("注意：本文不是javascript基础教程，如果你没有接触过原型的基本知识，应该先去了解一下，推荐看《javascript高级程序设计（第三版）》第6章：面向对象的程序设计。")])]),_._v(" "),v("p",[_._v("上节已经提到，"),v("strong",[_._v("每个函数"),v("code",[_._v("function")]),_._v("都有一个"),v("code",[_._v("prototype")])]),_._v("，即原型。这里再加一句话——每个对象都有一个"),v("code",[_._v("__proto__")]),_._v("，可成为隐式原型。")]),_._v(" "),v("p",[_._v("这个"),v("code",[_._v("__proto__")]),_._v("是一个隐藏的属性，"),v("code",[_._v("javascript")]),_._v("不希望开发者用到这个属性值，有的低版本浏览器甚至不支持这个属性值。所以你在"),v("code",[_._v("Visual Studio 2012")]),_._v("这样很高级很智能的编辑器中，都不会有"),v("code",[_._v("__proto__")]),_._v("的智能提示，但是你不用管它，直接写出来就是了。")]),_._v(" "),v("p",[v("img",{attrs:{src:"/my-blog/closure/181508179098239.png",alt:""}})]),_._v(" "),v("p",[v("img",{attrs:{src:"/my-blog/closure/181508340651970.png",alt:""}})]),_._v(" "),v("p",[_._v("上面截图看来，"),v("code",[_._v("obj.__proto__")]),_._v("和"),v("code",[_._v("Object.prototype")]),_._v("的属性一样！这么巧！")]),_._v(" "),v("p",[_._v("答案就是一样。")]),_._v(" "),v("p",[v("code",[_._v("obj")]),_._v("这个对象本质上是被"),v("code",[_._v("Object")]),_._v("函数创建的，因此"),v("code",[_._v("obj.__proto__=== Object.prototype")]),_._v("。我们可以用一个图来表示。")]),_._v(" "),v("p",[v("img",{attrs:{src:"/my-blog/closure/181509180812624.png",alt:""}})]),_._v(" "),v("p",[_._v("即，每个对象都有一个"),v("code",[_._v("__proto__")]),_._v("属性，指向创建该对象的函数的"),v("code",[_._v("prototype")]),_._v("。")]),_._v(" "),v("p",[_._v("那么上图中的"),v("code",[_._v("Object prototype")]),_._v("也是一个对象，它的"),v("code",[_._v("__proto__")]),_._v("指向哪里？")]),_._v(" "),v("p",[_._v("好问题！")]),_._v(" "),v("p",[_._v("在说明"),v("code",[_._v("Object prototype")]),_._v("之前，先说一下自定义函数的"),v("code",[_._v("prototype")]),_._v("。自定义函数的"),v("code",[_._v("prototype")]),_._v("本质上就是和 "),v("code",[_._v("var obj = {}")]),_._v(" 是一样的，都是被"),v("code",[_._v("Object")]),_._v("创建，所以它的"),v("code",[_._v("__proto__")]),_._v("指向的就是"),v("code",[_._v("Object.prototype")]),_._v("。")]),_._v(" "),v("p",[_._v("但是"),v("code",[_._v("Object.prototype")]),_._v("确实一个特例——它的"),v("code",[_._v("__proto__")]),_._v("指向的是"),v("code",[_._v("null")]),_._v("，切记切记！")]),_._v(" "),v("p",[v("img",{attrs:{src:"/my-blog/closure/181510403153733.png",alt:""}})]),_._v(" "),v("p",[_._v("还有——函数也是一种对象，函数也有"),v("code",[_._v("__proto__")]),_._v("吗？")]),_._v(" "),v("p",[_._v("又一个好问题！——当然有。")]),_._v(" "),v("p",[_._v("函数也不是从石头缝里蹦出来的，函数也是被创建出来的。谁创建了函数呢？——"),v("code",[_._v("Function")]),_._v('——注意这个大写的"F"。')]),_._v(" "),v("p",[_._v("且看如下代码。")]),_._v(" "),v("p",[v("img",{attrs:{src:"/my-blog/closure/181511124714709.png",alt:""}})]),_._v(" "),v("p",[_._v("以上代码中，第一种方式是比较传统的函数创建方式，第二种是用"),v("code",[_._v("new Functoin")]),_._v("创建。")]),_._v(" "),v("p",[_._v("首先根本不推荐用第二种方式。")]),_._v(" "),v("p",[_._v("这里只是向大家演示，函数是被"),v("code",[_._v("Function")]),_._v("创建的。")]),_._v(" "),v("p",[_._v("好了，根据上面说的一句话——对象的"),v("code",[_._v("__proto__")]),_._v("指向的是创建它的函数的"),v("code",[_._v("prototype")]),_._v("，就会出现："),v("code",[_._v("Object.__proto__ === Function.prototype")]),_._v("。用一个图来表示。")]),_._v(" "),v("p",[v("img",{attrs:{src:"/my-blog/closure/181512068463597.png",alt:""}})]),_._v(" "),v("p",[_._v("上图中，很明显的标出了：自定义函数"),v("code",[_._v("Foo.__proto__")]),_._v("指向"),v("code",[_._v("Function.prototype")]),_._v("，"),v("code",[_._v("Object.__proto__")]),_._v("指向"),v("code",[_._v("Function.prototype")]),_._v("，唉，怎么还有一个......"),v("code",[_._v("Function.__proto__")]),_._v("指向"),v("code",[_._v("Function.prototype")]),_._v("？这不成了循环引用了？")]),_._v(" "),v("p",[_._v("对！是一个环形结构。")]),_._v(" "),v("p",[_._v("其实稍微想一下就明白了。"),v("code",[_._v("Function")]),_._v("也是一个函数，函数是一种对象，也有"),v("code",[_._v("__proto__")]),_._v("属性。既然是函数，那么它一定是被"),v("code",[_._v("Function")]),_._v("创建。所以——"),v("code",[_._v("Function")]),_._v("是被自身创建的。所以它的"),v("code",[_._v("__proto__")]),_._v("指向了自身的"),v("code",[_._v("Prototype")]),_._v("。")]),_._v(" "),v("p",[_._v("篇幅不少了，估计也都看烦了。快结束了。")]),_._v(" "),v("p",[_._v("最后一个问题："),v("code",[_._v("Function.prototype")]),_._v("指向的对象，它的"),v("code",[_._v("__proto__")]),_._v("是不是也指向"),v("code",[_._v("Object.prototype")]),_._v("？")]),_._v(" "),v("p",[_._v("答案是肯定的。因为"),v("code",[_._v("Function.prototype")]),_._v("指向的对象也是一个普通的被"),v("code",[_._v("Object")]),_._v("创建的对象，所以也遵循基本的规则。")]),_._v(" "),v("p",[v("img",{attrs:{src:"/my-blog/closure/181512489403338.png",alt:""}})]),_._v(" "),v("p",[_._v("OK 本节结束，是不是很乱？")]),_._v(" "),v("p",[_._v("乱很正常。那这一节就让它先乱着，下一节我们将请另一个老朋友来帮忙，把它理清楚。这位老朋友就是——"),v("code",[_._v("instanceof")]),_._v("。")]),_._v(" "),v("p",[_._v("具体内容，请看下节分解。")])])},[],!1,null,null,null);e.options.__file="closure-4.md";o.default=e.exports}}]);